<nav class="navbar navbar-expand-lg navbar-dark bg-pastel-blue">
  <div class="container-fluid">
    <a class="navbar-brand" [routerLink]="['/']">
      <img
        src="assets/labiofam.png"
        alt="Logo de labiofam"
        style="height: 2rem"
      />
    </a>
    <!--Menu de hamburguesa-->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-end" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <a
            class="nav-link active"
            aria-current="page"
            [routerLink]="['/']"
            (click)="hideNavbar()"
            >Inicio</a
          >
        </li>
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <a
            class="nav-link"
            [routerLink]="['/point-of-sales']"
            (click)="hideNavbar()"
            >Establecimientos</a
          >
        </li>
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <a
            class="nav-link"
            [routerLink]="['/Bioproducts']"
            (click)="hideNavbar()"
            >Bioproductos</a
          >
        </li>
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <span *ngIf="servicios.length > 0" (click)="hideNavbar()">
            <a class="nav-link" [routerLink]="['/Services']"> Servicios </a>
          </span>
        </li>
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <a class="nav-link" [routerLink]="['/Contact']" (click)="hideNavbar()"
            >Contactos</a
          >
        </li>
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <a
            class="nav-link"
            [routerLink]="['/Testimonios']"
            (click)="hideNavbar()"
            >Testimonios</a
          >
        </li>
        <li class="nav-item" [routerLinkActive]="['link-active']">
          <p-overlayPanel #op [style]="{ width: '250px' }">
            <ng-template pTemplate="content">
              <div *ngIf="isLogged; else notLoggedIn">
                <!-- Aquí va tu tarjeta con los datos del usuario si esta loggeado -->
                <div
                  class="card"
                  style="
                    width: 100%;
                    background-color: var(--color-blue-white);
                    box-shadow: none !important;
                  "
                >
                  <div class="card-body">
                    <button mat-icon-button class="info">
                      <fa-icon [icon]="user" class="icon"></fa-icon>
                    </button>
                    <h3 class="card-title">
                      Hola <strong>{{ data!.user.name }}</strong>
                    </h3>
                    <h3 class="card-title">
                      Tu rol actual es: <strong>{{ this.rol! }}</strong>
                    </h3>
                    <!-- Aquí van más datos del usuario -->
                  </div>
                </div>
                <div style="display: flex; justify-content: space-between">
                  <div class="mb-3">
                    <button
                      [routerLink]="['/dashboard/home']"
                      (click)="op.hide()"
                      class="btn btn-primary"
                    >
                      Administración
                    </button>
                  </div>
                  <div class="mb-3">
                    <button
                      (click)="logoutAndHide()"
                      class="btn btn-light"
                      type="button"
                    >
                      Salir
                    </button>
                  </div>
                </div>
              </div>
              <ng-template #notLoggedIn>
                <div class="d-flex align-items-start">
                  <div
                    class="icon-square text-body-emphasis bg-body-secondary d-inline-flex align-items-center justify-content-center fs-4 flex-shrink-0 me-3"
                  >
                    <button mat-icon-button class="info">
                      <fa-icon [icon]="user" class="icon"></fa-icon>
                    </button>
                  </div>
                  <div>
                    <h3 class="fs-3 text-body-emphasis">Hola!</h3>
                    <p>¿Tienes una cuenta? Prueba iniciar sesión.</p>
                    <a
                      [routerLink]="['/login']"
                      class="btn btn-primary"
                      (click)="op.hide()"
                      >Iniciar
                    </a>
                  </div>
                </div>
              </ng-template>
            </ng-template>
          </p-overlayPanel>

          <button
            *ngIf="!isLogged"
            type="button"
            mat-icon-button
            (click)="op.toggle($event)"
            class="info"
          >
            <fa-icon [icon]="user" class="icon"></fa-icon>
          </button>

          <button
            type="button"
            *ngIf="isLogged"
            mat-icon-button
            (click)="op.toggle($event)"
            class="info1"
          >
            <fa-icon [icon]="user" class="icon1"></fa-icon>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- btn-sm-->
